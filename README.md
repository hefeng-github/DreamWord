# 单词查询系统 - 基于语境的释义匹配

一个智能的英文单词查询系统，可以根据语境匹配合适的释义，并集成硅基流动AI进行智能分析。

## 功能特性

- ✅ 支持283,816个单词（牛津高阶英汉双解词典第10版）
- ✅ 智能识别单词变形形式（如 ran → run）
- ✅ 提取原形信息
- ✅ 返回中文释义
- ✅ 根据语境智能判断使用原形还是变形
- ✅ 集成硅基流动AI进行智能分析
- ✅ 返回原形的音标
- ✅ 提供多个释义和例句
- ✅ 新增词形还原功能（需安装nltk）

## 安装

1. 确保已安装Python 3.7+
2. 安装依赖：
```bash
pip install -r requirements.txt
```

若要启用高级词形还原功能，还需安装NLTK及其数据：
```bash
pip install nltk
python -c "import nltk; nltk.download('wordnet'); nltk.download('omw-1.4')"
```

## 配置


## 使用方法

### 交互式界面

```bash
python word_lookup.py
```

### 菜单选项

1. **查询单词（输入语境）**
   - 输入英文单词
   - 输入语境描述
   - 系统会：
     - 识别单词是否为变形形式
     - 使用AI分析应该使用原形还是变形
     - 返回最匹配的释义和音标
     - 显示AI分析结果

2. **查看单词所有释义**
   - 输入英文单词
   - 显示单词的所有释义、音标和例句

3. **退出**
   - 退出程序
   - 退出程序

### 示例

#### 示例1：查询变形形式

```
请输入英文单词: ran
请输入语境描述: I ran every morning to stay fit

------------------------------------------------------------
单词: ran
原形: run
音标: /rʌn/, /rʌnz/, /ræn/, /ˈrʌnɪŋ/

中文释义:
  1. 跑；奔跑
  2. 奔跑

例句:
  1. to go running
  2. long-distance/cross-country running

AI分析:
  推荐词形: run
  判断理由: 语境中包含"ran"，使用变形形式
------------------------------------------------------------
```

#### 示例2：查询原形

```
请输入英文单词: run
请输入语境描述: I run every morning

------------------------------------------------------------
单词: run
音标: /rʌn/, /rʌnz/, /ræn/, /ˈrʌnɪŋ/

中文释义:
  1. 跑；奔跑
  2. 奔跑

例句:
  1. to go running
  2. long-distance/cross-country running
------------------------------------------------------------
```

#### 示例3：使用新词形还原功能

当您输入一个不在数据库中的变形形式（如 refused），系统现在会尝试将其还原为其基本形式（如 refuse）并显示相关释义。

## AI功能说明

### 智能词形判断

当输入变形形式时，AI会分析语境并推荐：
- 是否应该使用原形
- 还是应该使用变形形式

### AI分析结果

查询结果会包含：
- `recommended_form`: AI推荐的词形
- `reason`: AI的判断理由

### 无API密钥

如果未配置API密钥，系统会使用规则匹配：
- 检查语境中是否包含变形形式
- 如果包含，使用变形形式查询
- 否则使用原形查询

## 文件结构

```
words/
├── config.py              # 配置文件管理
├── ai_service.py         # 硅基流动AI服务
├── word_lookup.py        # 主程序
├── databases/
│   └── word_datails.db # 牛津词典数据库
├── config.json           # 配置文件（自动生成）
└── requirements.txt       # Python依赖
```

## 技术栈

- Python 3.7+
- SQLite3
- HTMLParser
- 硅基流动API
- Jaccard相似度算法
- NLTK (可选，用于高级词形还原)

## 注意事项

1. API密钥安全：
   - 不要将API密钥提交到版本控制系统
   - `config.json`已添加到`.gitignore`
   
2. 网络要求：
   - 需要能够访问硅基流动API
   - 建议使用稳定的网络连接

3. 数据库：
   - `word_datails.db`是只读的
   - 不要修改数据库文件

4. NLTK依赖（可选）：
   - 词形还原功能需要安装NLTK库
   - 首次使用需下载WordNet数据
   - 如不安装NLTK，系统将使用内置的简单规则进行词形还原

## 测试

运行测试脚本：
```bash
python test_ai.py
```

测试内容：
- AI集成测试
- 词形判断测试
- 语境分析测试

## 许可证

本项目仅供学习和研究使用。

## 支持

如有问题或建议，请创建Issue。