# 单词查询系统 - 基于语境的释义匹配

一个智能的英文单词查询系统，可以根据语境匹配合适的释义，支持智能识别单词变形形式。

## 功能特性

- ✅ 支持283,816个单词（牛津高阶英汉双解词典第10版）
- ✅ 智能识别单词变形形式（如 ran → run）
- ✅ 提取单词原形信息
- ✅ 返回中文释义和英文释义
- ✅ 根据语境自动匹配合适的释义
- ✅ 返回原形的音标
- ✅ 提供多个释义和例句
- ✅ 智能词形还原功能（支持NLTK和内置规则）

## 安装

### 1. 环境要求

- Python 3.7 或更高版本

### 2. 安装基础依赖

```bash
pip install -r requirements.txt
```

### 3. 安装NLTK（可选）

若要启用高级词形还原功能，还需安装NLTK及其数据：

```bash
pip install nltk
python -c "import nltk; nltk.download('wordnet'); nltk.download('omw-1.4')"
```

**注意**：如果不安装NLTK，系统会使用内置的简单规则进行词形还原，功能依然可用。

## 使用方法

### 交互式界面

```bash
python word_lookup.py
```

### 菜单选项

1. **查询单词（输入语境）**
   - 输入英文单词
   - 输入语境描述（可选）
   - 系统会：
     - 自动识别单词是否为变形形式
     - 智能还原单词原形
     - 根据语境返回最匹配的释义和音标
     - 显示例句

2. **查看单词所有释义**
   - 输入英文单词
   - 显示单词的所有释义、音标和例句

3. **退出**
   - 退出程序

### 使用示例

#### 示例1：查询变形形式

```
请输入英文单词: ran
请输入语境描述: I ran every morning to stay fit

------------------------------------------------------------
单词: ran
原形: run
音标: /rʌn/, /rʌnz/, /ræn/, /ˈrʌnɪŋ/

中文释义:
  1. 跑；奔跑
  2. 奔跑

例句:
  1. to go running
  2. long-distance/cross-country running
------------------------------------------------------------
```

#### 示例2：查询原形

```
请输入英文单词: run
请输入语境描述: I run every morning

------------------------------------------------------------
单词: run
音标: /rʌn/, /rʌnz/, /ræn/, /ˈrʌnɪŋ/

中文释义:
  1. 跑；奔跑
  2. 奔跑

例句:
  1. to go running
  2. long-distance/cross-country running
------------------------------------------------------------
```

#### 示例3：智能词形还原

当您输入一个不在数据库中的变形形式（如 refused），系统会尝试将其还原为基本形式（如 refuse）并显示相关释义。

#### 示例4：使用语境匹配置义

```
请输入英文单词: bank
请输入语境描述: I sat by the river bank

------------------------------------------------------------
单词: bank
音标: /bæŋk/

中文释义:
  1. 岸；岸边

例句:
  1. a river bank
------------------------------------------------------------
```

## 核心功能说明

### 1. 智能词形还原

系统使用三层策略进行词形还原：

1. **数据库链接信息**：优先使用MDX词典中的词形链接
2. **NLTK词形还原**：使用WordNet进行专业的词形还原（需安装NLTK）
3. **内置规则**：使用预定义的规则处理常见变形形式

支持的不规则动词包括：
- ran → run
- ate → eat
- went → go
- bought → buy
- taught → teach
等60+个常见不规则动词

支持的规则变形包括：
- 动词过去式（-ed）
- 名词复数（-s, -es）
- 动词现在分词（-ing）
- 形容词比较级（-er, -est）

### 2. 语境匹配

系统使用Jaccard相似度算法，根据语境自动选择最合适的释义：
- 将语境和释义分词
- 计算词汇集合的交集和并集
- 返回相似度最高的释义

### 3. 多词义支持

对于多义词，系统可以：
- 显示所有释义（选项2）
- 根据语境智能选择最佳释义（选项1）

## 文件结构

```
words/
├── word_lookup.py        # 主程序文件
├── databases/
│   └── word_details.db   # 牛津词典数据库
├── requirements.txt      # Python依赖列表
└── README.md            # 本文档
```

## 技术栈

- **Python 3.7+**：主要编程语言
- **SQLite3**：数据库存储
- **HTMLParser**：MDX格式HTML解析
- **Jaccard相似度**：语境匹配算法
- **NLTK**（可选）：高级词形还原

## 依赖说明

### 必需依赖

- 无额外依赖，仅使用Python标准库

### 可选依赖

- **nltk**：用于更准确的词形还原
  - 安装：`pip install nltk`
  - 下载数据：`python -c "import nltk; nltk.download('wordnet'); nltk.download('omw-1.4')"`

## 注意事项

1. **数据库文件**
   - `word_details.db` 是只读数据库文件
   - 请勿修改或删除数据库文件
   - 数据库包含283,816个单词条目

2. **NLTK数据**
   - 首次使用NLTK时需要下载WordNet数据
   - 数据大小约10MB
   - 下载后存储在用户目录的nltk_data文件夹中

3. **查询性能**
   - 本地数据库查询速度快
   - 无需网络连接即可使用
   - 建议查询时提供语境以获得更准确的结果

## 常见问题

### Q1: 为什么某些单词查不到？

A: 可能的原因：
- 单词拼写错误
- 数据库中未收录该词（可尝试输入原形）
- 单词过于专业或生僻

### Q2: NLTK安装失败怎么办？

A: 不安装NLTK不影响核心功能，系统会自动使用内置规则进行词形还原。

### Q3: 如何获得更准确的查询结果？

A: 建议在查询时提供语境，系统会根据语境自动选择最合适的释义。

### Q4: 支持哪些词形的识别？

A: 支持常见的不规则动词、规则变形（过去式、复数、分词等），详见"核心功能说明"部分。

## 更新日志

### v1.0.0
- 初始版本发布
- 支持牛津高阶英汉双解词典第10版
- 智能词形还原
- 语境匹配功能
- 支持NLTK高级词形还原

## 许可证

本项目仅供学习和研究使用。

词典数据来源：牛津高阶英汉双解词典第10版

## 贡献

欢迎提交问题和建议！
