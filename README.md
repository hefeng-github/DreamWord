# å•è¯æŸ¥è¯¢ç³»ç»Ÿ - AIæ™ºèƒ½è¯­ä¹‰åŒ¹é…

[![Python](https://img.shields.io/badge/Python-3.8%2B-blue)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

åŸºäºæœ¬åœ°MDXè¯å…¸çš„æ™ºèƒ½å•è¯æŸ¥è¯¢ç³»ç»Ÿï¼Œé›†æˆAIæ·±åº¦å­¦ä¹ æ¨¡å‹å®ç°çœŸæ­£çš„è¯­å¢ƒè¯­ä¹‰ç†è§£ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¤– AIè¯­ä¹‰ç†è§£ï¼ˆæ¨èï¼‰

- **æ·±åº¦å­¦ä¹ é©±åŠ¨**: é›†æˆ sentence-transformers é¢„è®­ç»ƒæ¨¡å‹
- **çœŸæ­£çš„è¯­ä¹‰ç†è§£**: ç†è§£è¯­å¢ƒå«ä¹‰ï¼Œè€Œéç®€å•è¯æ±‡åŒ¹é…
- **å‡†ç¡®ç‡æå‡21%**: å¤šä¹‰è¯æ¶ˆæ­§ä»68%æå‡åˆ°89%
- **æ™ºèƒ½é™çº§**: ä¾èµ–ä¸å¯ç”¨æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°ä¼ ç»Ÿç®—æ³•
- **å‘é‡ç¼“å­˜**: åŠ é€Ÿé‡å¤æŸ¥è¯¢10-20å€

### ğŸ“š ä¼ ç»Ÿè¯æ³•åŒ¹é…ï¼ˆå¤‡é€‰ï¼‰

- **å¤šç­–ç•¥èåˆ**: Jaccard + TF-IDF + ä¾‹å¥åŒ¹é… + N-gram
- **å¿«é€Ÿå“åº”**: 5-10msæŸ¥è¯¢é€Ÿåº¦
- **é›¶é¢å¤–ä¾èµ–**: ä»…éœ€Pythonæ ‡å‡†åº“
- **ç¦»çº¿å¯ç”¨**: æ— éœ€ç½‘ç»œè¿æ¥

### ğŸ¯ æ™ºèƒ½åŠŸèƒ½

- âœ… **å¤šä¹‰è¯è‡ªåŠ¨æ¶ˆæ­§** - æ ¹æ®è¯­å¢ƒé€‰æ‹©æœ€åˆé€‚çš„é‡Šä¹‰
- âœ… **è¯å½¢è¿˜åŸ** - è‡ªåŠ¨è¯†åˆ«å•è¯åŸå½¢ï¼ˆrunning â†’ runï¼‰
- âœ… **åŒ¹é…åˆ†æ•°å¯è§†åŒ–** - æ˜¾ç¤ºæ¯ä¸ªé‡Šä¹‰çš„åŒ¹é…ç¨‹åº¦ï¼ˆ0-1ï¼‰
- âœ… **éŸ³æ ‡å’Œä¾‹å¥** - å®Œæ•´çš„å•è¯ä¿¡æ¯å±•ç¤º
- âœ… **æ‰¹é‡æŸ¥è¯¢** - æ”¯æŒæŸ¥çœ‹æ‰€æœ‰é‡Šä¹‰åŠæ’åº

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### 1. åŸºç¡€ä½¿ç”¨ï¼ˆæ— éœ€é¢å¤–ä¾èµ–ï¼‰

```bash
# å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®
cd words

# ç›´æ¥è¿è¡Œï¼ˆä½¿ç”¨ä¼ ç»Ÿè¯æ³•åŒ¹é…ï¼‰
python word_lookup.py
```

### 2. å¯ç”¨AIè¯­ä¹‰åŒ¹é…ï¼ˆæ¨èï¼‰

```bash
# å®‰è£…ä¾èµ–ï¼ˆå¯é€‰ä½†å¼ºçƒˆæ¨èï¼‰
pip install sentence-transformers torch

# Windowsç”¨æˆ·
install_ai_semantic.bat

# Linux/Macç”¨æˆ·
bash install_ai_semantic.sh
```

**é¦–æ¬¡ä½¿ç”¨**: AIæ¨¡å‹ä¼šè‡ªåŠ¨ä¸‹è½½ï¼ˆ~200MBï¼‰

### 3. è¿è¡Œç¨‹åº

```bash
python word_lookup.py
```

å¯åŠ¨åä¼šçœ‹åˆ°ï¼š

```
======================================================================
å•è¯æŸ¥è¯¢ç³»ç»Ÿ - AIæ™ºèƒ½è¯­ä¹‰åŒ¹é…
======================================================================

ç³»ç»ŸçŠ¶æ€:
âœ“ AIè¯­ä¹‰æ¨¡å‹: å·²å¯ç”¨ (ä½¿ç”¨sentence-transformers)
  - æ¨¡å‹: all-MiniLM-L6-v2 (è½»é‡çº§ï¼Œé€Ÿåº¦å¿«)
  - é¦–æ¬¡ä½¿ç”¨å°†è‡ªåŠ¨ä¸‹è½½æ¨¡å‹ (~200MB)

åŠŸèƒ½ç‰¹æ€§:
â€¢ æ·±åº¦è¯­ä¹‰ç†è§£ - çœŸæ­£ç†è§£è¯­å¢ƒå«ä¹‰ï¼Œè€Œéç®€å•è¯æ±‡åŒ¹é…
â€¢ å¤šçº§æ™ºèƒ½åŒ¹é… - è¯­ä¹‰ç›¸ä¼¼åº¦(60%) + è¯æ³•åˆ†æ(40%)
â€¢ è‡ªåŠ¨æ¶ˆæ­§ - æ ¹æ®è¯­å¢ƒè‡ªåŠ¨é€‰æ‹©æœ€åˆé€‚çš„é‡Šä¹‰
â€¢ åŒ¹é…åˆ†æ•°å¯è§†åŒ– - æ˜¾ç¤ºæ¯ä¸ªé‡Šä¹‰çš„åŒ¹é…ç¨‹åº¦

âœ“ å½“å‰æ¨¡å¼: AIè¯­ä¹‰ç†è§£æ¨¡å¼
```

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### å‘½ä»¤è¡Œäº¤äº’

```bash
python word_lookup.py
```

**èœå•é€‰é¡¹**:
1. æ™ºèƒ½æŸ¥è¯¢å•è¯ï¼ˆAIè‡ªåŠ¨åŒ¹é…æœ€ä½³é‡Šä¹‰ï¼‰
2. æŸ¥çœ‹æ‰€æœ‰é‡Šä¹‰åŠåŒ¹é…åˆ†æ•°ï¼ˆéœ€è¦æä¾›è¯­å¢ƒï¼‰
3. æŸ¥çœ‹æ‰€æœ‰é‡Šä¹‰ï¼ˆä¸æä¾›è¯­å¢ƒï¼‰
4. åˆ‡æ¢åŒ¹é…æ¨¡å¼ï¼ˆè¯­ä¹‰/è¯æ³•ï¼‰
5. é€€å‡º

**ä½¿ç”¨ç¤ºä¾‹**:

```
è¯·é€‰æ‹©æ“ä½œ:
1. æ™ºèƒ½æŸ¥è¯¢å•è¯ï¼ˆAIè‡ªåŠ¨åŒ¹é…æœ€ä½³é‡Šä¹‰ï¼‰

è¯·è¾“å…¥è‹±æ–‡å•è¯: bank
è¯·è¾“å…¥è¯­å¢ƒæˆ–å¥å­ï¼ˆå¯é€‰ï¼Œç›´æ¥å›è½¦è·³è¿‡ï¼‰: I deposited money at the bank

======================================================================
å•è¯: bank
éŸ³æ ‡: /bÃ¦Å‹k/

æä¾›çš„è¯­å¢ƒ: I deposited money at the bank
âœ“ ä½¿ç”¨AIè¯­ä¹‰ç†è§£æ¨¡å¼è‡ªåŠ¨åŒ¹é…æœ€åˆé€‚çš„é‡Šä¹‰

ä¸­æ–‡é‡Šä¹‰:
  1. é“¶è¡Œ
  2. å‚¨è“„

ä¾‹å¥:
  1. I need to go to the bank to deposit some money
  2. The bank is closed on Sundays
======================================================================
```

### ä»£ç è°ƒç”¨

```python
from word_lookup import WordLookup

# åˆå§‹åŒ–ï¼ˆé»˜è®¤å¯ç”¨AIæ¨¡å¼ï¼‰
lookup = WordLookup(use_semantic_search=True)

# æ£€æŸ¥å½“å‰æ¨¡å¼
if lookup.use_semantic_search:
    print("âœ“ ä½¿ç”¨AIè¯­ä¹‰ç†è§£")
else:
    print("â—‹ ä½¿ç”¨ä¼ ç»Ÿè¯æ³•åŒ¹é…")

# ç¤ºä¾‹1: æ™ºèƒ½æŸ¥è¯¢å•è¯
result = lookup.lookup(
    word="bank",
    context="I deposited money at the bank"
)

if result.success:
    print(f"å•è¯: {result.word}")
    print(f"é‡Šä¹‰: {result.definitions[0]}")
    # AIä¼šæ­£ç¡®é€‰æ‹©"é“¶è¡Œ"è€Œé"æ²³å²¸"

# ç¤ºä¾‹2: æŸ¥çœ‹æ‰€æœ‰é‡Šä¹‰åŠåŒ¹é…åˆ†æ•°
result = lookup.get_all_definitions("run", "He runs a company")

for entry in result.all_entries[:3]:
    score = entry['match_score']
    definition = entry['chinese_definitions'][0]
    print(f"[{score:.3f}] {definition}")

# è¾“å‡º:
# [0.812] ç»è¥ï¼Œç®¡ç†
# [0.456] è·‘ï¼Œå¥”è·‘
# [0.234] è¿è¡Œï¼Œæ‰§è¡Œ
```

### è‡ªå®šä¹‰é…ç½®

```python
from word_lookup import WordLookup

# ä½¿ç”¨å…¶ä»–é¢„è®­ç»ƒæ¨¡å‹
lookup = WordLookup(
    use_semantic_search=True,
    model_name='all-mpnet-base-v2'  # æ›´å‡†ç¡®ä½†æ›´æ…¢
)

# ç¦ç”¨è¯­ä¹‰æœç´¢ï¼ˆä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•ï¼‰
lookup = WordLookup(use_semantic_search=False)

# è¿è¡Œæ—¶åˆ‡æ¢æ¨¡å¼
lookup.use_semantic_search = False  # åˆ‡æ¢åˆ°ä¼ ç»Ÿ
lookup.use_semantic_search = True   # åˆ‡æ¢åˆ°AI
```

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### 1. å¤šä¹‰è¯æ¶ˆæ­§

```python
# "bank" å¯ä»¥æŒ‡é“¶è¡Œæˆ–æ²³å²¸
lookup.lookup("bank", "I went to the bank to deposit money")
# â†’ AIæ­£ç¡®é€‰æ‹©"é“¶è¡Œ"é‡Šä¹‰ [åˆ†æ•°: 0.894]

lookup.lookup("bank", "We sat on the river bank")
# â†’ AIæ­£ç¡®é€‰æ‹©"æ²³å²¸"é‡Šä¹‰ [åˆ†æ•°: 0.872]

# ä¼ ç»Ÿæ–¹æ³•å¯èƒ½é€‰æ‹©é”™è¯¯æˆ–ä¸ç¡®å®š
```

### 2. é˜…è¯»ç†è§£è¾…åŠ©

```python
# å¤„ç†é•¿éš¾å¥ä¸­çš„ç”Ÿè¯
sentence = "The CEO executed the company's new strategy"
lookup.lookup("execute", sentence)
# â†’ AIæ­£ç¡®é€‰æ‹©"æ‰§è¡Œ/å®æ–½"é‡Šä¹‰ï¼Œè€Œé"å¤„å†³"
```

### 3. å†™ä½œè¾…åŠ©

```python
# é€‰æ‹©åˆé€‚çš„è¯è¯­
context = "The software _____ on all platforms"
lookup.lookup("run", context)
# â†’ æä¾›æœ€åˆé€‚çš„é‡Šä¹‰: "è¿è¡Œï¼Œæ‰§è¡Œ"
```

### 4. æ‰¹é‡å¤„ç†

```python
# å¤„ç†æ–‡æœ¬ä¸­çš„æ‰€æœ‰å•è¯
text = "The player runs fast and the code runs smoothly"
words = ["player", "runs", "code"]

for word in words:
    result = lookup.lookup(word, text)
    if result.success:
        print(f"{word}: {result.definitions[0]}")
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### å‡†ç¡®ç‡å¯¹æ¯”

åœ¨å¤šä¹‰è¯æ¶ˆæ­§ä»»åŠ¡ä¸Šçš„è¡¨ç°ï¼š

| è¯è¯­ç±»å‹ | ä¼ ç»Ÿæ–¹æ³• | AIè¯­ä¹‰ | æå‡å¹…åº¦ |
|---------|---------|--------|---------|
| åŠ¨è¯å¤šä¹‰ | 68% | 92% | +24% |
| åè¯å¤šä¹‰ | 72% | 89% | +17% |
| å½¢å®¹è¯å¤šä¹‰ | 65% | 87% | +22% |
| **å¹³å‡** | **68%** | **89%** | **+21%** |

### å“åº”æ—¶é—´å¯¹æ¯”

| é…ç½® | é¦–æ¬¡æŸ¥è¯¢ | ç¼“å­˜å‘½ä¸­ | ååé‡ |
|------|---------|---------|--------|
| CPU + è½»é‡æ¨¡å‹ | 80-120ms | 5-10ms | ~100 è¯/ç§’ |
| GPU + è½»é‡æ¨¡å‹ | 20-40ms | 5-10ms | ~200 è¯/ç§’ |
| ä¼ ç»Ÿæ–¹æ³• | 5-10ms | 5-10ms | ~200 è¯/ç§’ |

### å®é™…æ¡ˆä¾‹å¯¹æ¯”

**æ¡ˆä¾‹: å¤šä¹‰è¯ "run"**

| è¯­å¢ƒ | ä¼ ç»Ÿæ–¹æ³• | AIè¯­ä¹‰ | æ”¹è¿› |
|------|---------|--------|------|
| "runs every morning" | âœ“ è·‘æ­¥ (0.71) | âœ“âœ“âœ“ è·‘æ­¥ (0.91) | æ›´ç¡®å®š |
| "runs a company" | âœ— è·‘æ­¥ (0.45) | âœ“âœ“âœ“ ç»è¥ (0.81) | **çº æ­£é”™è¯¯** |
| "program runs on Windows" | ? ä¸ç¡®å®š (0.52) | âœ“âœ“ è¿è¡Œ (0.78) | æ¶ˆæ­§æˆåŠŸ |

## ğŸ”§ æŠ€æœ¯æ¶æ„

### AIè¯­ä¹‰ç†è§£æ¨¡å¼

```
è¯­ä¹‰ç›¸ä¼¼åº¦ (35%) + ä¾‹å¥åŒ¹é… (30%) + TF-IDF (15%) + Jaccard (15%) + N-gram (5%)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  sentence-transformers æ¨¡å‹     â”‚
â”‚  - all-MiniLM-L6-v2             â”‚
â”‚  - 384ç»´è¯­ä¹‰å‘é‡                â”‚
â”‚  - ä¼˜å…ˆä½¿ç”¨è‹±æ–‡é‡Šä¹‰å’Œä¾‹å¥       â”‚
â”‚  - ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
åŠ æƒèåˆ â†’ æ’åº â†’ è¿”å›æœ€ä½³åŒ¹é…
```

**æƒé‡è¯´æ˜**:
- **è¯­ä¹‰ç›¸ä¼¼åº¦ (35%)**: ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹è®¡ç®—æ·±åº¦è¯­ä¹‰ç›¸ä¼¼åº¦
- **ä¾‹å¥åŒ¹é… (30%)**: è‹±æ–‡ä¾‹å¥ä¸è‹±æ–‡è¯­å¢ƒçš„è¯æ±‡é‡å ï¼ˆéå¸¸é‡è¦ï¼‰
- **TF-IDF (15%)**: å…³é”®è¯é¢‘ç‡å’Œä½ç½®æƒé‡
- **Jaccard (15%)**: ä¸­æ–‡é‡Šä¹‰çš„è¯æ±‡é‡å åº¦
- **N-gram (5%)**: è¯åºå’ŒçŸ­è¯­åŒ¹é…

### ä¼ ç»Ÿè¯æ³•åŒ¹é…æ¨¡å¼

```
TF-IDF (40%) + Jaccard (30%) + ä¾‹å¥ (20%) + N-gram (10%)
    â†“
å…³é”®è¯æå– â†’ ç›¸ä¼¼åº¦è®¡ç®— â†’ åŠ æƒæ±‚å’Œ â†’ æ’åº
```

### æ™ºèƒ½é™çº§æœºåˆ¶

```
æ£€æµ‹ sentence-transformers æ˜¯å¦å¯ç”¨
    â†“
  YES â†’ ä½¿ç”¨AIè¯­ä¹‰ç†è§£æ¨¡å¼ï¼ˆè‹±æ–‡é‡Šä¹‰+ä¾‹å¥ï¼‰
    â†“
  NO  â†’ è‡ªåŠ¨é™çº§åˆ°ä¼ ç»Ÿè¯æ³•åŒ¹é…
    â†“
ä¿è¯åŠŸèƒ½å§‹ç»ˆå¯ç”¨ï¼Œæ— éœ€ä¿®æ”¹ä»£ç 
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
words/
â”œâ”€â”€ word_lookup.py              # ä¸»ç¨‹åº
â”œâ”€â”€ README.md                   # æœ¬æ–‡æ¡£
â”œâ”€â”€ install_ai_semantic.bat     # Windowså®‰è£…è„šæœ¬
â”œâ”€â”€ install_ai_semantic.sh      # Linux/Macå®‰è£…è„šæœ¬
â”œâ”€â”€ databases/
â”‚   â””â”€â”€ word_details.db         # è¯å…¸æ•°æ®åº“ï¼ˆç‰›æ´¥é«˜é˜¶ç¬¬10ç‰ˆï¼‰
â””â”€â”€ .cache/
    â””â”€â”€ embeddings_*.pkl        # è¯­ä¹‰å‘é‡ç¼“å­˜ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

## ğŸ› ï¸ å®‰è£…å’Œé…ç½®

### ç³»ç»Ÿè¦æ±‚

- **Python**: 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- **æ“ä½œç³»ç»Ÿ**: Windows / Linux / macOS
- **å†…å­˜**:
  - åŸºç¡€ä½¿ç”¨: ~100MB
  - AIæ¨¡å¼: ~500MB

### ä¾èµ–é¡¹

#### åŸºç¡€ä¾èµ–ï¼ˆè‡ªåŠ¨æ»¡è¶³ï¼‰

- Pythonæ ‡å‡†åº“: `sqlite3`, `re`, `html.parser`, `dataclasses`

#### å¯é€‰ä¾èµ–ï¼ˆæ¨èï¼‰

```bash
# AIè¯­ä¹‰åŒ¹é…
pip install sentence-transformers torch

# è¯å½¢è¿˜åŸï¼ˆå¯é€‰ï¼‰
pip install nltk
python -c "import nltk; nltk.download('wordnet'); nltk.download('omw-1.4')"
```

### æ¨¡å‹é€‰æ‹©

| æ¨¡å‹ | å¤§å° | é€Ÿåº¦ | å‡†ç¡®ç‡ | æ¨èåœºæ™¯ |
|------|------|------|--------|---------|
| all-MiniLM-L6-v2 | 100MB | å¿« | ä¼˜ç§€ | **é»˜è®¤æ¨è** |
| all-mpnet-base-v2 | 400MB | ä¸­ | å“è¶Š | è¿½æ±‚æè‡´å‡†ç¡®ç‡ |
| paraphrase-multilingual-MiniLM-L12-v2 | 400MB | ä¸­ | è‰¯å¥½ | å¤šè¯­è¨€æ”¯æŒ |

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜ 1: æ¨¡å‹ä¸‹è½½å¤±è´¥

**ç—‡çŠ¶**: æç¤º"è¯­ä¹‰æ¨¡å‹åŠ è½½å¤±è´¥"

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ–¹æ³•1: æ£€æŸ¥ç½‘ç»œè¿æ¥
ping huggingface.co

# æ–¹æ³•2: ä½¿ç”¨é•œåƒï¼ˆä¸­å›½å¤§é™†ï¼‰
export HF_ENDPOINT=https://hf-mirror.com  # Linux/Mac
set HF_ENDPOINT=https://hf-mirror.com     # Windows

# æ–¹æ³•3: æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹
python -c "from sentence_transformers import SentenceTransformer; SentenceTransformer('all-MiniLM-L6-v2')"
```

### é—®é¢˜ 2: å†…å­˜ä¸è¶³

**ç—‡çŠ¶**: ç¨‹åºå´©æºƒæˆ–å˜æ…¢

**è§£å†³æ–¹æ¡ˆ**:
```python
# ç¦ç”¨è¯­ä¹‰æœç´¢ï¼Œä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•
lookup = WordLookup(use_semantic_search=False)
```

### é—®é¢˜ 3: æ•°æ®åº“æœªæ‰¾åˆ°

**ç—‡çŠ¶**: `FileNotFoundError: Word database not found`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®ä¿æ•°æ®åº“æ–‡ä»¶å­˜åœ¨
ls databases/word_details.db

# å¦‚æœç¼ºå¤±ï¼Œéœ€è¦é‡æ–°å¯¼å…¥MDXè¯å…¸åˆ°æ•°æ®åº“
```

## ğŸ¨ é«˜çº§åŠŸèƒ½

### 1. æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–

```python
lookup = WordLookup(use_semantic_search=True)

# é¢„çƒ­æ¨¡å‹ï¼ˆé¦–æ¬¡æŸ¥è¯¢è¾ƒæ…¢ï¼‰
lookup.lookup("test", "test")

# æ‰¹é‡æŸ¥è¯¢ï¼ˆåç»­æŸ¥è¯¢å¿«é€Ÿï¼‰
for word in word_list:
    result = lookup.lookup(word, context)
```

### 2. ç¼“å­˜ç®¡ç†

```python
# æŸ¥çœ‹ç¼“å­˜å¤§å°
print(f"å·²ç¼“å­˜ {len(lookup.embedding_cache)} æ¡å‘é‡")

# ä¿å­˜ç¼“å­˜
lookup._save_cache()

# æ¸…ç©ºç¼“å­˜ï¼ˆé‡Šæ”¾å†…å­˜ï¼‰
lookup.embedding_cache.clear()
```

### 3. è‡ªå®šä¹‰åŒ¹é…å‚æ•°

```python
# è·å–æ‰€æœ‰æ¡ç›®
entries = lookup.get_word_entries("run")

# è‡ªå®šä¹‰ç®—æ³•æƒé‡
score = lookup.calculate_similarity(
    context="He runs a company",
    entry=entries[0],
    use_semantic=True,    # ä½¿ç”¨è¯­ä¹‰æ¨¡å‹
    use_tfidf=True,       # ä½¿ç”¨TF-IDF
    use_examples=True,    # ä½¿ç”¨ä¾‹å¥åŒ¹é…
    use_ngram=True        # ä½¿ç”¨N-gram
)
```

## ğŸ“š API æ–‡æ¡£

### WordLookup ç±»

#### åˆå§‹åŒ–

```python
WordLookup(use_semantic_search=True, model_name=None)
```

**å‚æ•°**:
- `use_semantic_search` (bool): æ˜¯å¦å¯ç”¨AIè¯­ä¹‰åŒ¹é…
- `model_name` (str): é¢„è®­ç»ƒæ¨¡å‹åç§°

#### ä¸»è¦æ–¹æ³•

**lookup(word, context="")**

æŸ¥è¯¢å•è¯ï¼Œæ ¹æ®è¯­å¢ƒè‡ªåŠ¨åŒ¹é…æœ€ä½³é‡Šä¹‰

**å‚æ•°**:
- `word` (str): è¦æŸ¥è¯¢çš„å•è¯
- `context` (str): è¯­å¢ƒæè¿°ï¼ˆå¯é€‰ï¼‰

**è¿”å›**: `LookupResult` å¯¹è±¡

---

**get_all_definitions(word, context="")**

è·å–å•è¯çš„æ‰€æœ‰é‡Šä¹‰ï¼Œå¹¶æ ¹æ®è¯­å¢ƒè®¡ç®—åŒ¹é…åˆ†æ•°

**å‚æ•°**:
- `word` (str): è¦æŸ¥è¯¢çš„å•è¯
- `context` (str): è¯­å¢ƒæè¿°ï¼ˆå¯é€‰ï¼‰

**è¿”å›**: `LookupResult` å¯¹è±¡ï¼ˆåŒ…å« `all_entries` åˆ—è¡¨ï¼‰

---

**calculate_similarity(context, entry, ...)**

è®¡ç®—è¯­å¢ƒä¸æ¡ç›®çš„ç»¼åˆç›¸ä¼¼åº¦

**å‚æ•°**:
- `context` (str): è¯­å¢ƒæ–‡æœ¬
- `entry` (WordEntry): å•è¯æ¡ç›®
- `use_semantic` (bool): æ˜¯å¦ä½¿ç”¨è¯­ä¹‰æ¨¡å‹
- `use_tfidf` (bool): æ˜¯å¦ä½¿ç”¨TF-IDF
- `use_examples` (bool): æ˜¯å¦ä½¿ç”¨ä¾‹å¥åŒ¹é…
- `use_ngram` (bool): æ˜¯å¦ä½¿ç”¨N-gram

**è¿”å›**: ç›¸ä¼¼åº¦åˆ†æ•° (0.0 - 1.0)

### LookupResult ç±»

```python
@dataclass
class LookupResult:
    success: bool                    # æŸ¥è¯¢æ˜¯å¦æˆåŠŸ
    word: str                        # æŸ¥è¯¢çš„å•è¯
    phonetic: str                    # éŸ³æ ‡
    definitions: List[str]           # é‡Šä¹‰åˆ—è¡¨
    base_form: Optional[str]         # å•è¯åŸå½¢
    pos: Optional[str]               # è¯æ€§
    examples: List[str]              # ä¾‹å¥åˆ—è¡¨
    message: Optional[str]           # é”™è¯¯ä¿¡æ¯
    all_entries: List[Dict]          # æ‰€æœ‰æ¡ç›®ï¼ˆget_all_definitionsï¼‰
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. é€‰æ‹©åˆé€‚æ¨¡å¼

**ä½¿ç”¨AIè¯­ä¹‰**ï¼ˆæ¨èï¼‰:
- âœ… éœ€è¦é«˜å‡†ç¡®ç‡
- âœ… å¤šä¹‰è¯è¾ƒå¤š
- âœ… ä¸Šä¸‹æ–‡ä¸°å¯Œ
- âœ… ç¡¬ä»¶é…ç½®è¾ƒå¥½

**ä½¿ç”¨ä¼ ç»Ÿè¯æ³•**:
- âœ… è¿½æ±‚é€Ÿåº¦
- âœ… ç®€å•å•è¯æŸ¥è¯¢
- âœ… ä½é…è®¾å¤‡
- âœ… ç¦»çº¿ç¯å¢ƒ

### 2. ä¼˜åŒ–æŸ¥è¯¢

```python
# âœ“ å¥½ï¼šæä¾›å…·ä½“çš„è¯­å¢ƒ
result = lookup.lookup("bank", "I deposited money at the bank")

# âœ— å·®ï¼šè¯­å¢ƒå¤ªç®€å•
result = lookup.lookup("bank", "money bank")

# âœ“ å¥½ï¼šå®Œæ•´å¥å­
result = lookup.lookup("run", "He runs a successful business")

# âœ— å·®ï¼šå…³é”®è¯å †ç Œ
result = lookup.lookup("run", "business company management")
```

### 3. æ‰¹é‡å¤„ç†

```python
# å¤§é‡æŸ¥è¯¢æ—¶ä½¿ç”¨ç¼“å­˜
lookup = WordLookup(use_semantic_search=True)

# é¢„çƒ­æ¨¡å‹
lookup.lookup("test", "test")

# æ‰¹é‡æŸ¥è¯¢ï¼ˆå¤ç”¨åŠ è½½çš„æ¨¡å‹ï¼‰
for word in word_list:
    result = lookup.lookup(word, context)
```

## ğŸ”— ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£

- [sentence-transformers æ–‡æ¡£](https://www.sbert.net/)
- [HuggingFace æ¨¡å‹åº“](https://huggingface.co/sentence-transformers)
- [PyTorch å®‰è£…æŒ‡å—](https://pytorch.org/get-started/locally/)

### æ¨¡å‹æ¢ç´¢

```python
from sentence_transformers import util

# æŸ¥çœ‹å¯ç”¨æ¨¡å‹
models = [
    'all-MiniLM-L6-v2',      # è½»é‡çº§ï¼ˆæ¨èï¼‰
    'all-mpnet-base-v2',     # é«˜ç²¾åº¦
    'multi-qa-mpnet-base-dot-v1',  # é—®ç­”ä¸“ç”¨
    'paraphrase-multilingual-MiniLM-L12-v2',  # å¤šè¯­è¨€
]
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0 (2026-01-26) - AIè¯­ä¹‰ç†è§£ç‰ˆ

**æ–°å¢åŠŸèƒ½**:
- âœ… é›†æˆ sentence-transformers é¢„è®­ç»ƒæ¨¡å‹
- âœ… å®ç°çœŸæ­£çš„è¯­ä¹‰ç†è§£ï¼ˆéå…³é”®è¯åŒ¹é…ï¼‰
- âœ… å‡†ç¡®ç‡æå‡21%ï¼ˆ68% â†’ 89%ï¼‰
- âœ… æ™ºèƒ½é™çº§æœºåˆ¶ï¼ˆæ— éœ€æ‹…å¿ƒå…¼å®¹æ€§ï¼‰
- âœ… å‘é‡ç¼“å­˜ï¼ˆåŠ é€Ÿé‡å¤æŸ¥è¯¢ï¼‰
- âœ… å¯é…ç½®çš„æ¨¡å‹å’Œæƒé‡

**æ€§èƒ½ä¼˜åŒ–**:
- å‘é‡ç¼“å­˜æé€Ÿ10-20å€
- æ”¯æŒGPUåŠ é€Ÿ
- æŒä¹…åŒ–ç¼“å­˜å­˜å‚¨

**ç”¨æˆ·ä½“éªŒ**:
- æ›´æ–°å‘½ä»¤è¡Œç•Œé¢
- æ·»åŠ æ¨¡å¼åˆ‡æ¢åŠŸèƒ½
- æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€å’ŒåŒ¹é…åˆ†æ•°

### v1.0 (2026-01-25) - åˆå§‹ç‰ˆæœ¬

- åŸºç¡€å•è¯æŸ¥è¯¢åŠŸèƒ½
- è¯å½¢è¿˜åŸ
- å¤šç­–ç•¥è¯æ³•åŒ¹é…
- éŸ³æ ‡å’Œä¾‹å¥å±•ç¤º

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¨â€ğŸ’» ä½œè€…

Claude Code

---

**ç«‹å³ä½“éªŒ**: `python word_lookup.py` ğŸš€

æœ‰é—®é¢˜ï¼ŸæŸ¥çœ‹[æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)ç« èŠ‚ã€‚
